<div class="relationships-container form">
        <div class="history-relationship">
            <div class="row" ng-if="patient.relationships.length > 0">
                <div class="col col1">
                    <strong>{{ 'REGISTRATION_HEADER_RELATIONSHIP_LABEL'|translate }}</strong>
                </div>
                <div class="col col2">
                    <strong>{{ 'REGISTRATION_HEADER_NAME_LABEL'|translate }}</strong>
                </div>
                <div class="col col3">
                    <strong>{{ 'REGISTRATION_HEADER_VALIDITY_DATE_LABEL'|translate }}</strong>
                </div>
            </div>
            <div class="row" ng-repeat="relationship in patient.relationships track by $index" ng-hide="relationship.voided">
                <div class="col col1">
                    <span>{{getRelationshipTypeForDisplay(relationship)}}</span>
                </div>
                <div class="col col2">
                    <span><a ng-click="openPatientDashboardInNewTab(relationship)">{{getRelatedToPersonForDisplay(relationship)}}</a></span>
                </div>
                <div class="col col3">
                    <span>{{relationship.endDate | bahmniDate}}</span>
                </div>
                <div class="col col4">
                    <button type="button" class="small-btn row-remover" ng-confirm-click="removeRelationship(relationship)" id="relationRemoveBtn">
                        <span class="fa fa-remove"></span>
                    </button>
                </div>
            </div>
        </div>

        <div class="new-relationship">
            <div class="row" ng-repeat="newRelationship in patient.newlyAddedRelationships">
                <div class="col col1 form-field">
                    <div class="field-attribute showOn-small-screen">
                        <label>{{ 'REGISTRATION_RELATION_TYPE_LABEL'|translate }}
                            <span class="asterick">*</span>
                        </label>
                    </div>
                    <div class="field-value">
                        <select ng-model="newRelationship.relationshipType.uuid" ng-options="type.uuid as type.aIsToB for type in ::relationshipTypes"
                                ng-change="clearRelationshipRow(newRelationship, $index);">
                            <option value="">{{ ::'REGISTRATION_LABEL_SELECT_RELATIONSHIP_TYPE' | translate}}</option>
                        </select>
                    </div>
                    <span class="asterick showOn-desktop">*</span>
                    <div class="relationship-extension-btn">
                        <button class="add-person-btn" type="button" ng-disabled="!newRelationship.relationshipType.uuid"
                            ng-click="openPopupWindow(newRelationship)">{{ ::'REGISTRATION_LABEL_SELECT_PERSON' | translate }}
                        </button>
                    </div>
                </div>
                <div class="col col2 form-field">
                    <div class="field-value" ng-show="newRelationship.personB.display">
                        <span>
                            <a ng-click="openPatientDashboardInNewTab(newRelationship)">{{newRelationship.personB.display}}</a>
                        </span>
                    </div>
                    <span class="no-person" ng-show="duplicateRelationship(newRelationship)">{{ ::'REGISTRATION_LABEL_RELATIONSHIP_EXISTS' | translate}}</span>
                </div>
                <div class="col col3 form-field">
                    <strong class="till-text">{{ ::'REGISTRATION_LABEL_TILL' | translate}}</strong>
                    <div class="field-attribute showOn-small-screen">
                        <label>Till Date</label>
                    </div>
                    <div class="field-value">
                        <input type="date" ng-model="newRelationship.endDate" ng-disabled="!newRelationship.relationshipType.uuid"/>
                    </div>
                </div>
                <div class="col col4">
                    <button type="button" class="small-btn row-remover" ng-if="!isEmpty(newRelationship)" ng-click="removeRelationship(newRelationship, $index)">
                        <span class="fa fa-remove"></span>
                    </button>
                </div>
            </div>
        </div>
    
</div>
