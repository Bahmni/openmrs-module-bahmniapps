<div bindonce class="dashboard-header opd-header-wrapper">
    <div class="opd-header-bottom tabs">
        <bm-back-links></bm-back-links>

        <button ng-if="clinicalDashboardConfig.showPrint()" class="dialog-button-group" ng-click="printDashboard()"
                accesskey="r">
            <i class="fa fa-print"></i>
            P<u>r</u>int
        </button>
 
        <!--<span class="retro-date-text" ng-if="$parent.retrospectiveEntry.isRetrospective"
              ng-bind="$parent.retrospectiveEntry.encounterDate | date:'dd/MM/yyyy'"/> -->

        <ul class="header-tabs" ng-if="clinicalDashboardConfig.showTabs()">
            <li class="tab-item dashboard" ng-repeat="dashboard in clinicalDashboardConfig.visibleTabs"
                ng-class="{'tab-selected' : clinicalDashboardConfig.isCurrentTab(dashboard), 'tab-removable': clinicalDashboardConfig.isCurrentTab(dashboard) && !dashboard.displayByDefault}">
                <span class="close" ng-click="closeDashboard(dashboard)">
                   <span class="close-icon">x</span>
                </span>
                <a ng-click="showDashboard(dashboard)">{{dashboard.dashboardName}}</a>

            </li>
            <li class="tab-item new-tab tab-active" bm-pop-over autoclose="true"
                ng-show="clinicalDashboardConfig.getUnOpenedTabs().length > 0">
                <a id="addDashboardButton" bm-pop-over-trigger>+</a>

                <div class="tab-submenu" bm-pop-over-target>
                    <ul>
                        <li ng-repeat="dashboard in clinicalDashboardConfig.getUnOpenedTabs()">
                            <a class="submenu-item unOpenedDashboard" ng-click="showDashboard(dashboard);">{{dashboard.dashboardName}} </a>
                        </li>
                    </ul>
                </div>
            </li>
        </ul>

        <recent-patients></recent-patients>


        <div class="dashboard-header-right-wrapper">


            <div class="dashboard-date-picker" ng-controller="PatientListHeaderController">
               <div class="retro-date-widget-wrapper" bm-pop-over>
                <div class="retro-date-widget-header">
                    <button bm-pop-over-trigger>Test ...</button>
                </div>
                <div class="retro-date-widget-panel" bm-pop-over-target>
                    <div class="input-container">
                    <label class="retro-date-label">Location</label>
                        <select ng-model="selectedLocationUuid">
                        <option ng-repeat="location in locations" ng-selected="isCurrentLocation(location)" value="{{location.uuid}}">
                            {{location.display}}
                        </option>
                    </select>
                    </div>
                    <div show-if-privilege="{{grantProviderAccess}}" style="display:block !important" class="input-container">
                        <label class="retro-date-label">Enter on behalf</label>
                        <input type="text" class="retro-date-widget" ng-model="encounterProvider.value"
                               bahmni-autocomplete source="getProviderList()" response-map="getProviderDataResults" on-select="providerSelected()" ng-change="clearProvider(encounterProvider.value)"/>
                    </div>
                    <div class="input-container">
                        <label show-if-privilege="{{retrospectivePrivilege}}" for="retro-date-label" class="retro-date-label" >Enter data for</label>
                        <input show-if-privilege="{{retrospectivePrivilege}}" class="retro-date-widget" type="date" ng-model="date" max="{{today}}"/>
                    </div>
                    
                    
                    <button id="retro-widget-button" ng-click="windowReload()">Ok</button>
                </div>
            </div>
            </div>



            <span class="grouped-buttons">
                <a class=" btn--left btn--success " ng-if="visitHistory.activeVisit || retrospectiveEntry.isRetrospective"
                   ng-click="collapseControlPanel()" href="#{{consultationBoardLink}}">Consultation</a>
                <a class="btn--right btn--success " title="Open in new window"
                   ng-if="visitHistory.activeVisit || retrospectiveEntry.isRetrospective"
                   ng-click="openConsultationInNewTab()"><i class="fa fa-external-link"></i></a>
           </span>
            <button class="toggle-patient" ng-click="toggleControlPanel()" ng-class="{'shift': showControlPanel}">
                <i class="fa fa-bars fa-white fa-large"></i>
            </button>
        </div>
    </div>
</div>
